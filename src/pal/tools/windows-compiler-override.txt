# HACK Docker container requires /z7 instead of /zi to avoid
# using mspdbsrv
if ("$ENV{__DockerBuild}" EQUAL 1)
    SET (CMAKE_C_FLAGS_INIT                "/Wall /FC")
    SET (CMAKE_C_FLAGS_DEBUG_INIT          "/Od /Z7")
    SET (CLR_C_FLAGS_CHECKED_INIT          "/O1 /Z7")
    SET (CMAKE_C_FLAGS_RELEASE_INIT        "/Ox /Z7")
    SET (CMAKE_C_FLAGS_RELWITHDEBINFO_INIT "/O2 /Z7")

    SET (CMAKE_CXX_FLAGS_INIT                "/Wall /FC")
    SET (CMAKE_CXX_FLAGS_DEBUG_INIT          "/Od /Z7")
    SET (CLR_CXX_FLAGS_CHECKED_INIT          "/O1 /Z7")
    SET (CMAKE_CXX_FLAGS_RELEASE_INIT        "/Ox /Z7")
    SET (CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT "/O2 /Z7")
else() # !DockerBuild
    SET (CMAKE_C_FLAGS_INIT                "/Wall /FC")
    SET (CMAKE_C_FLAGS_DEBUG_INIT          "/Od /Zi")
    SET (CLR_C_FLAGS_CHECKED_INIT          "/O1 /Zi")
    SET (CMAKE_C_FLAGS_RELEASE_INIT        "/Ox /Zi")
    SET (CMAKE_C_FLAGS_RELWITHDEBINFO_INIT "/O2 /Zi")

    SET (CMAKE_CXX_FLAGS_INIT                "/Wall /FC")
    SET (CMAKE_CXX_FLAGS_DEBUG_INIT          "/Od /Zi")
    SET (CLR_CXX_FLAGS_CHECKED_INIT          "/O1 /Zi")
    SET (CMAKE_CXX_FLAGS_RELEASE_INIT        "/Ox /Zi")
    SET (CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT "/O2 /Zi")
endif()

SET (CLR_DEFINES_DEBUG_INIT              DEBUG _DEBUG _DBG URTBLDENV_FRIENDLY=Checked BUILDENV_CHECKED=1)
SET (CLR_DEFINES_CHECKED_INIT            DEBUG _DEBUG _DBG URTBLDENV_FRIENDLY=Checked BUILDENV_CHECKED=1)
SET (CLR_DEFINES_RELEASE_INIT            NDEBUG URTBLDENV_FRIENDLY=Retail)
SET (CLR_DEFINES_RELWITHDEBINFO_INIT     NDEBUG URTBLDENV_FRIENDLY=Retail)